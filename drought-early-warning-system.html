<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="India Drought Monitor: India's real-time drought condition and forecast">
    <title>Drought Early Warning System | India Drought Monitor</title>
    <link rel="shortcut icon" href="assets/images/logo.png">
    <link rel="stylesheet" href="assets/leaflet/leaflet.css" />
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <script src="assets/leaflet/leaflet.js"></script>

</head>

<body>
    <div class="main-header">
        <h1>India Drought Monitor</h1>
    </div>
    <div class="nav">
        <input type="checkbox" id="nav-check">
        <div class="nav-header">
            <div class="nav-title">
                <p>India Drought Monitor</p>
            </div>
        </div>
        <div class="nav-btn">
            <label for="nav-check">
                <span></span>
                <span></span>
                <span></span>
            </label>
        </div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Area Under Drought</a>
            <a href="drought-early-warning-system.html" class="nav-link active-nav">Drought Early Warning System</a>
            <a href="drought-time-series.html" class="nav-link">Drought Time Series</a>
            <div class="navbar-dropdown">
                <button class="nav-link dropbtn"> Drought Forecast</button>
                <div class="dropdown-content">
                    <a href="drought-forecast.html">Quantitative Drought Forecast</a>
                    <a href="drought-outlook.html">Drought Outlooks</a>
                </div>
            </div>

            <div class="navbar-dropdown">
                <button class="nav-link dropbtn"> Streamflow Monitor</button>
                <div class="dropdown-content">
                    <a href="streamflow-monitor-7d.html">7 Days Mean Streamflow Percentile</a>
                    <a href="streamflow-monitor-30d.html">30 Days Mean Streamflow Percentile</a>
                </div>
            </div>
            <div class="navbar-dropdown">
                <button class="nav-link dropbtn"> Drought Types</button>
                <div class="dropdown-content">
                    <a href="standardized-precipitation-index.html">Standardized Precipitation Index (SPI)</a>
                    <a href="standardized-runoff-index.html">Standardized Runoff Index (SRI)</a>
                    <a href="standardized-soil-moisture-index.html">Standardized Soil Moisture Index (SSI)</a>
                </div>
            </div>
            <a href="drought-reporting.html" class="nav-link">Drought Reporting</a>
            <a href="contact.html" class="nav-link"> Contact Us</a>
        </div>
    </div>

    <div class="main">
        <div class="map-heading">
            <h1>Drought Early Warning System (DEWS)</h1>
        </div>
        <div id="map"></div>
        <div class="legend-panel">
            <div class="legend">
                <div class="item-heading">
                    <h2>Drought Categories</h2>
                </div>
                <div class="legend-item">
                    <p class="legend-color-value"> Exceptional Dry (D4)</p>
                    <p class="legend-color-value"> Extreme Dry (D3)</p>
                    <p class="legend-color-value"> Severe Dry (D2)</p>
                    <p class="legend-color-value"> Moderate Dry (D1)</p>
                    <p class="legend-color-value"> Abnormally Dry (D0)</p>
                    <p class="legend-color-value"> No Drought (None)</p>
                  </div>
                <div class="legend-color">
                    <i style="background-color: brown;"></i>
                    <i style="background-color: red;"></i>
                    <i style="background-color: orange;"></i>
                    <i style="background-color: rgb(252, 214, 148);"></i>
                    <i style="background-color: yellow;"></i>
                    <i style="background-color: white;"></i>
                </div>

                <div class="legend-item">
                    <p class="legend-num-value"> -3.0</p>
                    <p class="legend-num-value"> -2.0</p>
                    <p class="legend-num-value"> -1.6</p>
                    <p class="legend-num-value"> -1.3</p>
                    <p class="legend-num-value"> -0.8</p>
                    <p class="legend-num-value"> -0.5</p>
                </div>

            </div>
        </div>
            <div class="data-table">
                <div class="item-heading">
                    <h2>
                        Drought Condition (Percentage Area)
                    </h2>
                </div>

                <table>
                    <tr>
                        <th>Time</th>
                        <th>None</th>
                        <th style="background-color: yellow;">D0-D4</th>
                        <th style="background-color: rgb(252, 214, 148);">D1-D4</th>
                        <th style="background-color: orange;">D2-D4</th>
                        <th style="background-color: red">D3-D4</th>
                        <th style="background-color: brown;">D4</th>
                    </tr>
                    <tbody id="DroughtConditionTable">

                    </tbody>
                </table>
            </div>


    </div>







    <div class="footer">
        <div class="footer-image">
            <div class="footer-logo-2">
                <a href="https://vmishra.people.iitgn.ac.in/water&climate/" target="_blank"><img
                        src="assets/images/wcl_iitgn.png" alt="WCl IITGN"></a>
            </div>
            <div class="footer-logo-1">
                <a href="https://dic.gov.in/" target="_blank"> <img src="assets/images/Media-Lab-Asia.png"
                        alt="Media Lab Asia"> </a>
            </div>
        </div>

        <div class="footer-menu">
            <a href="disclaimer.html">Disclaimer</a> |
            <a href="acknowledgement.html">Acknowledgement</a> |
            <a href="contact.html">Contact Us</a>
        </div>
    </div>

    <script src="assets/leaflet/ControlGeocoder.js"></script>
    <script src="assets/leaflet/Control.FullScreen.js"></script>
    <script src="assets/leaflet/Leaflet.Sleep.js"></script>
    <script src="assets/js/IndiaState.js"></script>
    <script src="assets/js/IndiaDistrict.js"></script>
    <script src="assets/js/IndiaRiverBasin.js"></script>
    <script src="assets/js/IndiaRivers.js"></script>
    <script src="assets/js/papaparse.min.js"></script>
    <script src="assets/js/index.js"></script>
    <script>

        var table = document.getElementById('DroughtConditionTable')
        // let tableDataUrl =
        let tableDataUrl =
            "https://docs.google.com/spreadsheets/d/e/2PACX-1vTLl3ffx0cSFNJ87ynXoxo7AlYkUlpYHMyFQsMtp_5SiZi-NNJukxoeg06oeZJJgw/pub?output=csv";

        function buildTable(data) {
            data = data.data;
            var date = data[0].Var7 + "/" + data[0].Var8 + "/" + data[0].Var9;
            // console.log(date);
            function addDays(date, days) {
                var result = new Date(date);
                result.setDate(result.getDate() + days);
                return result.toLocaleDateString()
            }

            var timeHeading = ["Current <br>" + "(" + addDays(date, 0) + ")", "Last Week <br>" + "(" + addDays(date, -7) + ")", "One Month Ago <br>" + "(" + addDays(date, -30) + ")", "Three Month Ago<br>" + "(" + addDays(date, -90) + ")", "One year Ago<br>" + "(" + addDays(date, -365) + ")"]
            for (var i = 0; i < data.length; i++) {
                var row = `<tr>
                  <td>${timeHeading[i]}</td>
                  <td>${parseFloat(data[i].Var1).toFixed(1)}</td>
                  <td>${parseFloat(data[i].Var2).toFixed(1)}</td>
                  <td>${parseFloat(data[i].Var3).toFixed(1)}</td>
                  <td>${parseFloat(data[i].Var4).toFixed(1)}</td>
                  <td>${parseFloat(data[i].Var5).toFixed(1)}</td>
                  <td>${parseFloat(data[i].Var6).toFixed(1)}</td>
                </tr>`
                table.innerHTML += row
            }
        }
        // Papa Parse convert CSV to Json
        Papa.parse(tableDataUrl, {
            download: true,
            header: true,
            complete: buildTable,
        });

    </script>
</body>

</html>